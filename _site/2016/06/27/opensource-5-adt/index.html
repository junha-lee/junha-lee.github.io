<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/>


<title>kakao의 오픈소스 Ep5 - Almighty Data Transmitter</title>
<meta name="title" content="kakao의 오픈소스 Ep5 - Almighty Data Transmitter" />
<meta name="author" content="gordon.hahn"/>
<meta name="description" content="“카카오의 오픈소스를 소개합니다” 다섯번째는 gordon.hahn과 동료들이 개발한 ADT - Almighty Data Trasmitter입니다. ADT는 샤드 구성이나 사딩 규칙이 바뀔 때 샤드를 재분배하는 용도로 만들기 시작했지만, MySQL에서 데이터를 수집하여 다른 MySQL로 데이터를 전송하는 - CDC와 ETL이 결합된 - 만능 데이터 전송 도구로 변모하고 있습니다. ADT는 그 자체로도 유용한 소프트웨어 도구지만, MySQL 기반의 CDC/ETL 시스템을 구축하기 위한 좋은 시작점이 될 것 입니다. ADT는 무엇을 위한 툴인가요? ADT는 MySQL의 데이터를 수집하여 사용자가 원하는 형태로 가공하거나 다른 DB에 적재할 수..."/>

<meta property="fb:app_id" content="1204347326263800"/>

<meta property="og:site_name" content="kakao 기술 블로그"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="kakao의 오픈소스 Ep5 - Almighty Data Transmitter"/>
<meta property="og:description" content="“카카오의 오픈소스를 소개합니다” 다섯번째는 gordon.hahn과 동료들이 개발한 ADT - Almighty Data Trasmitter입니다. ADT는 샤드 구성이나 사딩 규칙이 바뀔 때 샤드를 재분배하는 용도로 만들기 시작했지만, MySQL에서 데이터를 수집하여 다른 MySQL로 데이터를 전송하는 - CDC와 ETL이 결합된 - 만능 데이터 전송 도구로 변모하고 있습니다. ADT는 그 자체로도 유용한 소프트웨어 도구지만, MySQL 기반의 CDC/ETL 시스템을 구축하기 위한 좋은 시작점이 될 것 입니다. ADT는 무엇을 위한 툴인가요? ADT는 MySQL의 데이터를 수집하여 사용자가 원하는 형태로 가공하거나 다른 DB에 적재할 수..."/>
<meta property="og:url" content="http://localhost:4000/2016/06/27/opensource-5-adt/"/>
<meta property="og:image" content="http://localhost:4000/files/covers/swiss-army-knife.jpg"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="kakao의 오픈소스 Ep5 - Almighty Data Transmitter"/>
<meta name="twitter:description" content="“카카오의 오픈소스를 소개합니다” 다섯번째는 gordon.hahn과 동료들이 개발한 ADT - Almighty Data Trasmitter입니다. ADT는 샤드 구성이나 사딩 규칙이 바뀔 때 샤드를 재분배하는 용도로 만들기 시작했지만, MySQL에서 데이터를 수집하여 다른 MySQL로 데이터를 전송하는 - CDC와 ETL이 결합된 - 만능 데이터 전송 도구로 변모하고 있습니다. ADT는 그 자체로도 유용한 소프트웨어 도구지만, MySQL 기반의 CDC/ETL 시스템을 구축하기 위한 좋은 시작점이 될 것 입니다. ADT는 무엇을 위한 툴인가요? ADT는 MySQL의 데이터를 수집하여 사용자가 원하는 형태로 가공하거나 다른 DB에 적재할 수..."/>
<meta name="twitter:label1" content="Written by"/>
<meta name="twitter:data1" content="gordon.hahn"/>
<meta name="twitter:image:src" content="http://localhost:4000/files/covers/swiss-army-knife.jpg"/>

<meta name="twitter:label2" content="Filed under"/>
<meta name="twitter:data2" content="opensource,almighty-data-transmitter,adt,mysql,sharding,devops"/>

<meta property="article:tag" content="opensource"/>

<meta property="article:tag" content="almighty-data-transmitter"/>

<meta property="article:tag" content="adt"/>

<meta property="article:tag" content="mysql"/>

<meta property="article:tag" content="sharding"/>

<meta property="article:tag" content="devops"/>



<meta property="article:published_time" content="2016-06-27T11:19:00+09:00"/>


<meta property="article:author" content="http://localhost:4000/authors/gordon.hahn"/>

<link href="http://localhost:4000/rss/" rel="alternate" type="application/rss+xml" title="RSS"/>
<link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"/>
<link href="/assets/apple-touch-icon.png" rel="apple-touch-icon" type="image/png"/>
<link href="/assets/apple-touch-icon.png" rel="apple-touch-icon-precomposed" type="image/png"/>
<link href="/assets/lib/normalize.css" rel="stylesheet" type="text/css"/>
<link href="/assets/css/monokai.css" rel="stylesheet" type="text/css"/> 
<link href="/assets/lib/magnific-popup.min.css" rel="stylesheet" type="text/css"/>
<link href="/assets/fonts/Kakao.css" rel="stylesheet" type="text/css"/> 
<link href="/assets/css/screen.css" rel="stylesheet" type="text/css"/>
<script>
    if (window.location.host.indexOf('tech.kakao.com') > -1 && window.location.protocol == "https:"){
        window.location = window.location.toString().replace(/^https:/, "http:");
    }
</script>

</head>
<body class="post-template">

<div id="header">
    <button id="menu-toggle" type="button">
        <span class="sr-only">Toggle Navigation Menu</span>
    </button>
    <button id="search-toggle" type="button">
        <span class="sr-only">Toggle Search Form</span>
    </button>
    <a id="logo" href="/">
        <span class="sr-only">KakaoTech</span>
    </a>
    <div id="search">
        <input id="search-input" type="search" placeholder="Search..." value="" />
    </div>
    <ul class="search__results" id="results-container"></ul>

    <ul id="menu" class="nav">
        <li class=" active "><a href="/">블로그</a></li>
        <li class=""><a href="/opensource/">오픈소스</a></li>
        <li class=""><a href="/openapi/">오픈API</a></li>
        <li class=""><a href="/events/">기술행사</a></li>
    </ul>
</div>
<!-- Script pointing to jekyll-search.js -->
<script src="/dest/jekyll-search.js" type="text/javascript"></script>

<script type="text/javascript">
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search2.json',
        searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: '<li>No results found</li>',
        limit: 15,
        fuzzy: false,
        exclude: ['Welcome']
    })
</script><!-- #header -->



<div id="wrapper">
    <div id="navbar" class="container">
  <h5><a id="link-back" href="/">Back to Posts</a></h5>
  
<ul id="shares">
    <li class="stalk" style="display:none">
        <a id="kakao-link-btn" href="javascript:;"></a>
    </li>
    <li>
        <a id="share-kakaostory" href="javascript:shareStory('http://localhost:4000/2016/06/27/opensource-5-adt/');"></a>
    </li>

    
    <li>
        <a id="share-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2016/06/27/opensource-5-adt/"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <span class="sr-only">Share to Facebook</span>
        </a>
    </li>
    
    
    <li>
        <a id="share-twitter"
           href="https://twitter.com/intent/tweet?text=kakao%EC%9D%98%20%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4%20Ep5%20-%20Almighty%20Data%20Transmitter&url=http://localhost:4000/2016/06/27/opensource-5-adt/">
            <span class="sr-only">Share to Twitter</span>
        </a>
    </li>
    
    
    <li>
        <a id="share-google" href="https://plus.google.com/share?url=http://localhost:4000/2016/06/27/opensource-5-adt/"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
            <span class="sr-only">Share to Google+</span>
        </a>
    </li>
    
</ul>

</div>

<div id="cover" class="container" style="background-image: url(/files/covers/swiss-army-knife.jpg);" >
  <div>
    <h1>kakao의 오픈소스 Ep5 - Almighty Data Transmitter</h1>
    <p>
      
      <a href="/tags/opensource">opensource</a>
      ,
      
      <a href="/tags/almighty-data-transmitter">almighty-data-transmitter</a>
      ,
      
      <a href="/tags/adt">adt</a>
      ,
      
      <a href="/tags/mysql">mysql</a>
      ,
      
      <a href="/tags/sharding">sharding</a>
      ,
      
      <a href="/tags/devops">devops</a>
      
      
    </p>
    


  </div>
</div>

<div id="content" class="container post" role="main">
  <div id="post-content"><p><a id="forkme" href="https://github.com/kakao/adt"></a></p>

<blockquote>
  <p>“카카오의 오픈소스를 소개합니다” 다섯번째는 <a href="">gordon.hahn</a>과 동료들이 개발한 <strong>ADT - Almighty Data Trasmitter</strong>입니다.</p>

  <p><a href="https://github.com/kakao/adt">ADT</a>는 샤드 구성이나 사딩 규칙이 바뀔 때 샤드를 재분배하는 용도로 만들기 시작했지만, MySQL에서 데이터를 수집하여 다른 MySQL로 데이터를 전송하는 - <a href="https://en.wikipedia.org/wiki/Change_data_capture">CDC</a>와 <a href="https://en.wikipedia.org/wiki/Extract,_transform,_load">ETL</a>이 결합된 - 만능 데이터 전송 도구로 변모하고 있습니다.</p>

  <p>ADT는 그 자체로도 유용한 소프트웨어 도구지만, MySQL 기반의 CDC/ETL 시스템을 구축하기 위한 좋은 시작점이 될 것 입니다.</p>
</blockquote>

<h2 id="adt는-무엇을-위한-툴인가요">ADT는 무엇을 위한 툴인가요?</h2>

<p><img src="http://item-kr.talk.kakao.co.kr/do/-26p06+UqCd0OAgiRHNZwPf1+nqjcFZi42Z3wogPJ3I_/70d666e5313db413b3539edc1d0fc1ea1667fc7b08261b4c493670baa83d5cb9" class="pull-right" />
ADT는 MySQL의 데이터를 수집하여 사용자가 원하는 형태로 가공하거나 다른 DB에 적재할 수 있는 툴입니다. 크게 나누면 두 가지 용도가 있습니다.</p>

<ul>
  <li>1회성 마이그레이션 작업</li>
  <li>실시간 마이그레이션 작업</li>
</ul>

<p>각각에 대해 활용 예시는 다음과 같습니다.</p>

<ul>
  <li>1회성 마이그레이션</li>
  <li>샤드 데이터 재분배 혹은 샤드 룰 변경(Modulus를 Range로, 혹은 반대로 변경)</li>
  <li>완전히 새롭게 설계한 스키마로 데이터 복사</li>
  <li>
    <p>1일 1회 MySQL의 데이터를 OLAP DB로 복사</p>
  </li>
  <li>실시간 마이그레이션</li>
  <li>MySQL의 실시간 변경되는 데이터를 NoSQL로 복사하여 read 부하 분산</li>
  <li>어떤 특별한 write 이벤트를 감지해서 Push Notification 전송</li>
  <li>사용자의 GPS 정보를 기준으로 샤드 재구성 (가까이 있는 다른 사용자들 찾기에 편리하겠죠?)</li>
</ul>

<p>이 외에도 여러 용도들이 있을 겁니다. 나머지는 여러분들의 상상력에 맡깁니다. 풀리퀘스트의 문은 활짝 열려있습니다 ^^;</p>

<h2 id="adt는-어떤-기능들이-있나요">ADT는 어떤 기능들이 있나요?</h2>

<p>ADT 자체가 하는 일은 단순합니다.</p>

<ul>
  <li>MySQL에서 데이터 수집</li>
  <li>Table Crawler: 각 테이블에 있는 데이터 수집</li>
  <li>Binary Log Receiver: 실시간으로 변경되는 데이터 수집</li>
  <li>수집한 데이터를 사용자가 구현한 Custom Handler로 전달</li>
</ul>

<p><img src="/files/adt-overall-arch.png" alt="ADT Overall Architecture" /></p>

<p><img src="http://item-kr.talk.kakao.co.kr/do/-26p06+UqCd0OAgiRHNZwPf1+nqjcFZi42Z3wogPJ3I_/553d0111a2757661a4c5bde97bdc88cb1667fc7b08261b4c493670baa83d5cb9" class="pull-right" />
용도에 따라 Custom Handler를 구현하는 게 허들이라면 허들일 수 있지만, <a href="https://github.com/kakao/adt/tree/master/adt-handler-parent/adt-handler-mysql-shard-rebalancer/src/main/java/com/kakao/adt/handler/msr">샤드 재분배용 커스텀 핸들러</a>의 소스 코드를 참조하면 그렇게 어렵지 않….을 겁니다. 아마도…요.
(이 부분에 대해서는 다른 글을 통해서 더 자세히 알아보겠습니다)</p>

<p>현재는 MySQL에서만 데이터를 수집하지만, 인기가 많으면 더욱 다양한 DB가 추가될 수도 있습니다. 역시나! 풀리퀘스트의 문은 활짝 열려있습니다 ^^;</p>

<h2 id="적용-사례">적용 사례</h2>

<p><img src="http://item-kr.talk.kakao.co.kr/do/-26p06+UqCd0OAgiRHNZwPf1+nqjcFZi42Z3wogPJ3I_/14b57ad97df0b8a45c6b521d175994121667fc7b08261b4c493670baa83d5cb9" class="pull-right" />
현재까지는 적용된 사례가 딱 하나 있습니다. 모 서비스의 테이블 스키마가 많이 변경되는 작업이었는데, 도저히 <code class="highlighter-rouge">ALTER TABLE</code>로 어떻게 할 수 있는 수준이 아니었다고 합니다. 테이블 스키마가 많이 바뀌어서 서비스 무정지 변경은 못했지만, ADT의 초기 버전을 이용해 무사히 마이그레이션 할 수 있었습니다.</p>

<p>ADT를 만들게 된 이유이자 핵심 목표인 <strong>샤드 재분배용 커스텀 핸들러</strong>는 현재 DB 엔지니어들과 안정성/정합성을 검증하는 단계입니다.</p>

<h2 id="끝으로">끝으로…</h2>

<ul>
  <li>ADT 특징에 관한 좀 더 자세한 내용</li>
  <li>사용 방법</li>
  <li>요구 사항</li>
  <li>데이터 정합성에 관한 이야기</li>
</ul>

<p>등등… 이 글에서 다루지 못한 많은 내용들이 <a href="https://github.com/kakao/adt/blob/master/README.md">README</a>에 담겨있습니다. 현재까지 구현된 ADT 프레임웍 본체와 검증이 진행 중인 샤드 재분배용 커스텀 핸들러의 소스 코드는 아래 Github 사이트에서 확인할 수 있습니다:</p>

<ul>
  <li>https://github.com/kakao/adt</li>
</ul>

<p><a href="http://tech.kakao.com">kakao 기술 블로그</a>와 <a href="https://github.com/kakao/adt/wiki">위키</a>을 통해서 ADT의 활용 사례를 소개할 예정입니다. ADT가 이름처럼 전지전능한 도구가 될 수 있도록 여러분들의 많은 관심과 참여를 기대합니다.</p>

<blockquote>
  <p>special thanks to <a href="http://gywn.net">성동찬</a> (한국카카오 카카오뱅크)</p>
</blockquote>

<ul>
  <li>커버 이미지 출처: <a href="https://flic.kr/p/7vQc3w">Swiss Army Knife - 3</a> © [Tom Von Lahndorff](https://www.flickr.com/photos/tomvon/</li>
  <li>데이터베이스 아이콘 출처: http://www.seaicons.com/database-icon/</li>
</ul>
</div>
  <div id="post-footer">
    
    <a id="post-author" href="/authors/gordon.hahn/">
      <div id="author-image" style="background-image:url(/files/authors/gordon.hahn.jpg);">
        <span class="sr-only">gordon.hahn's profile image</span>
      </div>
      <p id="author-name">gordon.hahn</p>
    </a>
    <p id="post-date">2016-06-27 11:19</p>
    <a id="post-more" href="/authors/gordon.hahn/">
      <span>Read more posts by this author</span>
    </a>
  </div>
</div>

<div class="container" style="margin-top:25px; padding:0px">
  <a href="https://www.welcomekakao.com" target="_blank"><img src="/files/career2020.jpg" style="width:100%;"></a>
</div>

<div id="post-links" class="container">
  
  
  <div id="post-prev" style="background-image: url(/files/covers/monad.jpg);" >
    <div>
      <h3><a href="/2016/05/04/asynchronous-programming-and-monad-transformers-in-scala/">Asynchronous Programming and Monad Transformers in Scala</a></h3>
      <p>YOU MIGHT ENJOY</p>
    </div>
  </div>
  
  
  
  <div id="post-next" style="background-image: url(/files/covers/shard.jpg);" >
    <div>
      <h3><a href="/2016/07/01/adt-mysql-shard-rebalancing/">ADT 활용 예제1: MySQL Shard 데이터 재분배</a></h3>
      <p>NEXT POST</p>
    </div>
  </div>
  
</div>

<div id="lightbox">
  <div id="lightbox-image"></div>
</div>

    <div class="clearfix"></div>

    <a href="#" id="back-to-top"></a>
</div>

<div id="footer" class="container-fluid">
    <ul id="links">
        
        <li>
            <a id="link-github" href="http://github.com/kakao" target="_blank">
                <span class="sr-only">github</span>
            </a>
        </li>
        
        
        <li>
            <a id="link-facebook" href="http://facebook.com/nkakao" target="_blank">
                <span class="sr-only">facebook</span>
            </a>
        </li>
        
        
        <li>
            <a id="link-twitter" href="http://twitter.com/kakaodev" target="_blank">
                <span class="sr-only">twitter</span>
            </a>
        </li>
        
        <li>
            <a id="link-rss" href="/rss" target="_blank">
                <span class="sr-only">rss</span>
            </a>
        </li>
    </ul>
    <ul id="footer-menu">
        <li><a href="//www.kakaocorp.com">Kakao</a></li>
        <li><a href="//careers.kakao.com/jobs">Jobs</a></li>
        <li><a href="//privacy.kakaocorp.com">Privacy</a></li>
    </ul>
    <p id="copyright">
        <a href="//www.kakaocorp.com">Copyright &copy; Kakao Corp.</a>
        All rights reserved.
    </p>
</div><!--#footer-->


<script src="/assets/lib/jquery-1.12.0.min.js"></script>
<script src="/assets/lib/jquery.magnific-popup.min.js"></script>
<script src="/assets/js/index.js"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-72007721-1', 'auto');
    ga('send', 'pageview');
</script>




    <script type='text/javascript'>
   //<![CDATA[
    // 사용할 앱의 JavaScript 키를 설정해 주세요.
    //Kakao.init('65d48e116d8b9409e08960c4800c3017');
    function shareStory(abs_page_url) {
        Kakao.Story.share({
            url: abs_page_url,
            text: '카카오 기술블로그 #개발자 #카카오'
        });
    }
    //]]>
</script>

    
    <script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '1204347326263800',
    xfbml      : true,
    version    : 'v2.7'
  });
};

(function(d, s, id){
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

    

    
    <script>!function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = p + '://platform.twitter.com/widgets.js';
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, 'script', 'twitter-wjs');
</script>

    

    
    <script src="https://apis.google.com/js/platform.js" async defer>
    {
        lang: 'ko'
    }
</script>

    

</body>
</html>
