<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/>


<title>kakao 기술 블로그가 GitHub Pages로 간 까닭은</title>
<meta name="title" content="kakao 기술 블로그가 GitHub Pages로 간 까닭은" />
<meta name="author" content="iolo.fitzowen"/>
<meta name="description" content="kakao 기술 블로그는 올해 초 Ghost 블로깅 플랫폼을 사용해서 오픈했으나,
최근 GitHub Pages와 Jekyll으로 바뀌었습니다.
이 글에서는 kakao 기술 블로그를 GitHub Pages로 옮기면서 Jekyll에 위해 추가한
기능들 - 태그별 포스트 목록 페이지, 작성자별 포스트 목록 페이지, 사이트맵 - 을 소개합니다.

"/>

<meta property="fb:app_id" content="1204347326263800"/>

<meta property="og:site_name" content="kakao 기술 블로그"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="kakao 기술 블로그가 GitHub Pages로 간 까닭은"/>
<meta property="og:description" content="kakao 기술 블로그는 올해 초 Ghost 블로깅 플랫폼을 사용해서 오픈했으나,
최근 GitHub Pages와 Jekyll으로 바뀌었습니다.
이 글에서는 kakao 기술 블로그를 GitHub Pages로 옮기면서 Jekyll에 위해 추가한
기능들 - 태그별 포스트 목록 페이지, 작성자별 포스트 목록 페이지, 사이트맵 - 을 소개합니다.

"/>
<meta property="og:url" content="http://localhost:4000/2016/07/07/tech-blog-story/"/>
<meta property="og:image" content="http://localhost:4000/files/covers/blog.jpg"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="kakao 기술 블로그가 GitHub Pages로 간 까닭은"/>
<meta name="twitter:description" content="kakao 기술 블로그는 올해 초 Ghost 블로깅 플랫폼을 사용해서 오픈했으나,
최근 GitHub Pages와 Jekyll으로 바뀌었습니다.
이 글에서는 kakao 기술 블로그를 GitHub Pages로 옮기면서 Jekyll에 위해 추가한
기능들 - 태그별 포스트 목록 페이지, 작성자별 포스트 목록 페이지, 사이트맵 - 을 소개합니다.

"/>
<meta name="twitter:label1" content="Written by"/>
<meta name="twitter:data1" content="iolo.fitzowen"/>
<meta name="twitter:image:src" content="http://localhost:4000/files/covers/blog.jpg"/>

<meta name="twitter:label2" content="Filed under"/>
<meta name="twitter:data2" content="github,github-pages,jekyll,static-site-generator"/>

<meta property="article:tag" content="github"/>

<meta property="article:tag" content="github-pages"/>

<meta property="article:tag" content="jekyll"/>

<meta property="article:tag" content="static-site-generator"/>



<meta property="article:published_time" content="2016-07-07T15:25:00+09:00"/>


<meta property="article:author" content="http://localhost:4000/authors/iolo.fitzowen"/>

<link href="http://localhost:4000/rss/" rel="alternate" type="application/rss+xml" title="RSS"/>
<link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon"/>
<link href="/assets/apple-touch-icon.png" rel="apple-touch-icon" type="image/png"/>
<link href="/assets/apple-touch-icon.png" rel="apple-touch-icon-precomposed" type="image/png"/>
<link href="/assets/lib/normalize.css" rel="stylesheet" type="text/css"/>
<link href="/assets/css/monokai.css" rel="stylesheet" type="text/css"/> 
<link href="/assets/lib/magnific-popup.min.css" rel="stylesheet" type="text/css"/>
<link href="/assets/fonts/Kakao.css" rel="stylesheet" type="text/css"/> 
<link href="/assets/css/screen.css" rel="stylesheet" type="text/css"/>
<script>
    if (window.location.host.indexOf('tech.kakao.com') > -1 && window.location.protocol == "https:"){
        window.location = window.location.toString().replace(/^https:/, "http:");
    }
</script>

</head>
<body class="post-template">

<div id="header">
    <button id="menu-toggle" type="button">
        <span class="sr-only">Toggle Navigation Menu</span>
    </button>
    <button id="search-toggle" type="button">
        <span class="sr-only">Toggle Search Form</span>
    </button>
    <a id="logo" href="/">
        <span class="sr-only">KakaoTech</span>
    </a>
    <div id="search">
        <input id="search-input" type="search" placeholder="Search..." value="" />
    </div>
    <ul class="search__results" id="results-container"></ul>

    <ul id="menu" class="nav">
        <li class=" active "><a href="/">블로그</a></li>
        <li class=""><a href="/opensource/">오픈소스</a></li>
        <li class=""><a href="/openapi/">오픈API</a></li>
        <li class=""><a href="/events/">기술행사</a></li>
    </ul>
</div>
<!-- Script pointing to jekyll-search.js -->
<script src="/dest/jekyll-search.js" type="text/javascript"></script>

<script type="text/javascript">
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search2.json',
        searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: '<li>No results found</li>',
        limit: 15,
        fuzzy: false,
        exclude: ['Welcome']
    })
</script><!-- #header -->



<div id="wrapper">
    <div id="navbar" class="container">
  <h5><a id="link-back" href="/">Back to Posts</a></h5>
  
<ul id="shares">
    <li class="stalk" style="display:none">
        <a id="kakao-link-btn" href="javascript:;"></a>
    </li>
    <li>
        <a id="share-kakaostory" href="javascript:shareStory('http://localhost:4000/2016/07/07/tech-blog-story/');"></a>
    </li>

    
    <li>
        <a id="share-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2016/07/07/tech-blog-story/"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <span class="sr-only">Share to Facebook</span>
        </a>
    </li>
    
    
    <li>
        <a id="share-twitter"
           href="https://twitter.com/intent/tweet?text=kakao%20%EA%B8%B0%EC%88%A0%20%EB%B8%94%EB%A1%9C%EA%B7%B8%EA%B0%80%20GitHub%20Pages%EB%A1%9C%20%EA%B0%84%20%EA%B9%8C%EB%8B%AD%EC%9D%80&url=http://localhost:4000/2016/07/07/tech-blog-story/">
            <span class="sr-only">Share to Twitter</span>
        </a>
    </li>
    
    
    <li>
        <a id="share-google" href="https://plus.google.com/share?url=http://localhost:4000/2016/07/07/tech-blog-story/"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
            <span class="sr-only">Share to Google+</span>
        </a>
    </li>
    
</ul>

</div>

<div id="cover" class="container" style="background-image: url(/files/covers/blog.jpg);" >
  <div>
    <h1>kakao 기술 블로그가 GitHub Pages로 간 까닭은</h1>
    <p>
      
      <a href="/tags/github">github</a>
      ,
      
      <a href="/tags/github-pages">github-pages</a>
      ,
      
      <a href="/tags/jekyll">jekyll</a>
      ,
      
      <a href="/tags/static-site-generator">static-site-generator</a>
      
      
    </p>
    


  </div>
</div>

<div id="content" class="container post" role="main">
  <div id="post-content"><p>kakao 기술 블로그는 올해 초 <a href="https://ghost.org">Ghost</a> 블로깅 플랫폼을 사용해서 오픈했으나,
최근 <a href="https://pages.github.com">GitHub Pages</a>와 <a href="https://jekyllrb.com">Jekyll</a>으로 바뀌었습니다.
이 글에서는 kakao 기술 블로그를 <a href="https://pages.github.com">GitHub Pages</a>로 옮기면서 <a href="https://jekyllrb.com">Jekyll</a>에 위해 추가한
기능들 - 태그별 포스트 목록 페이지, 작성자별 포스트 목록 페이지, 사이트맵 - 을 소개합니다.
<!--more--></p>

<h2 id="prologue">Prologue</h2>

<p><img src="http://item.kakaocdn.net/do/-26p06+UqCd0OAgiRHNZwHaq4FJCveCBKCNZV-bZscw_/89caada5a1ddde2795b892cae089b4da1667fc7b08261b4c493670baa83d5cb9" class="hcenter" /></p>

<p>오픈 초기에는 kakao는 <a href="https://brunch.co.kr">브런치</a>, <a href="http://www.tistory.com">티스토리</a>, <a href="http://blog.daum.net">다음블로그</a>, <a href="https://plain.is">플레인</a>까지
여러가지의 블로그스러운(?) 서비스를 하고 있으면서
정작 기술 블로그는 <a href="https://ghost.org">Ghost</a>을 사용하는 것에 대해 사내외에서 많은 의문을 제기했었죠.</p>

<p><img src="http://item.kakaocdn.net/do/-26p06+UqCd0OAgiRHNZwHaq4FJCveCBKCNZV-bZscw_/326692ab97f80a3e1dd36120231d666b1667fc7b08261b4c493670baa83d5cb9" class="hcenter" /></p>

<p><a href="http://www.tistory.com">티스토리</a>, <a href="https://brunch.co.kr">브런치</a>, <a href="https://wordpress.org">설치형 WordPress</a>, 자체 개발까지 다양한 솔루션을 검토했지만,
생뚱맞게도 <a href="https://ghost.org">Ghost</a>을 사용하기로 했습니다.
<a href="https://guides.github.com/features/mastering-markdown/">Markdown</a> 지원, 작성과 발행 권한 분리, 커스텀 디자인
그리고 기능 추가의 용이성(단순 블로그 외에도 많은 기능이 계획되어 있습니다)을 고려했습니다.
가장 결정적인 이유는 운영자의 <strong>개취</strong>였는다는 설도 있습니다만…</p>

<p><img src="http://item.kakaocdn.net/do/-26p06+UqCd0OAgiRHNZwHaq4FJCveCBKCNZV-bZscw_/01a3b97731f42b4efc929ebd7fa376431667fc7b08261b4c493670baa83d5cb9" class="hcenter" /></p>

<p>그러나, 운영 과정에서 블로그 외의 기능 개발이 보류되면서
<a href="https://ghost.org">Ghost</a>를 선택한 가장 큰 이유였던 <strong>기능 추가의 용이성</strong>은 의미가 없어졌고,
운영자의 <strong>개취</strong>만이 남았습니다.
무엇보다도(!) 기술 블로그 만의 <strong>Geek스러움</strong>이 부족했습니다.</p>

<p>그래서… 바꿨습니다!</p>

<h2 id="github-pages-와-jekyll"><a href="https://pages.github.com">GitHub Pages</a> 와 <a href="https://jekyllrb.com">Jekyll</a></h2>

<p><a href="https://pages.github.com">GitHub Pages</a>는 아시다시피 GitHub 저장소의 내용을 웹 페이지로 서비스해주는 기능입니다.
공짜로 웹 서버를 구축할 수 있지만, 스태틱 컨텐츠만 서비스할 수 있어서 제한적인 용도(예: 뻔한 오픈소스 소개/문서 사이트)에 주로 사용됩니다.
그러나, 여기에 <a href="https://staticsitegenerators.net">정적 사이트 생성기</a>가 결합되면 활용의 폭이 훨씬 넓어집니다.
그 중에서도 <a href="https://jekyllrb.com">Jekyll</a>은 <a href="https://pages.github.com">GitHub Pages</a>가 기본으로 지원하는 정적 사이트 생성기로,
소스(주로 <a href="https://guides.github.com/features/mastering-markdown/">Markdown</a>)를 깃헙에 올리면 <a href="https://jekyllrb.com">Jekyll</a>을 실행해서 정적 사이트를 생성하는 과정을 깃헙 서버가 자동으로 수행하고,
그것을 웹 페이지로 서비스합니다.</p>

<p>자세한 내용은 <a href="https://help.github.com/articles/using-jekyll-as-a-static-site-generator-with-github-pages">GitHub Pages에서 Jekyll을 정적 사이트 생성기로 사용하기</a>에게 맡기고,
이 글에서는 kakao 기술 블로그를 만들면서 추가한 기능들만 소개하겠습니다.</p>

<h3 id="태그별-포스트-목록-페이지">태그별 포스트 목록 페이지</h3>

<p><a href="https://jekyllrb.com">Jekyll</a>은 직접적으로 태깅(tagging)을 지원하지 않습니다.
이를 지원하는 여러가지 플러그인들을 테스트 해보았지만, 아쉽게도 <a href="https://pages.github.com">GitHub Pages</a>와 함께 쓸 수 없는 경우가 많았습니다.
그래서 <a href="https://jekyllrb.com/docs/collections/">Jekyll의 Collections 기능</a>을 활용해서 간단하게 만들었습니다.</p>

<ol>
  <li><code class="highlighter-rouge">_config.yml</code> 파일에 다음과 같이 <code class="highlighter-rouge">collections</code>와 <code class="highlighter-rouge">defaults</code> 설정을 추가합니다:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>
<span class="na">collections</span><span class="pi">:</span>
  <span class="na">tags</span><span class="pi">:</span>
    <span class="na">output</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">permalink</span><span class="pi">:</span> <span class="s">/tags/:path/</span>
<span class="nn">...</span>
<span class="na">defaults</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">tags</span>
    <span class="na">values</span><span class="pi">:</span>
      <span class="na">layout</span><span class="pi">:</span> <span class="s">tag</span>
<span class="nn">...</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">_tags</code> 디렉토리 안에 있는 파일 목록을 수집해서 <code class="highlighter-rouge">/tags/...</code>로 서비스되도록 HTML 파일을 생성하라는 설정입니다.
(디렉토리 이름 앞의 <code class="highlighter-rouge">_</code>는 오타가 아닙니다. 설정에는 <code class="highlighter-rouge">_</code>가 없고, 디렉토리 이름에는 <code class="highlighter-rouge">_</code>가 있습니다.)</p>

<ol>
  <li><code class="highlighter-rouge">_layouts</code> 디렉토리에 <strong>태그별 포스트 목록</strong>을 보여줄 템플릿 파일
<a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/_layouts/tag.html"><code class="highlighter-rouge">tag.html</code></a>을 만듭니다.
참고로, <a href="https://jekyllrb.com">Jekyll</a>은 <a href="https://shopify.github.io/liquid/">Liquid</a> 템플릿을 사용합니다.</li>
</ol>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"navbar"</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h5&gt;&lt;a</span> <span class="na">id=</span><span class="s">"link-back"</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Main<span class="nt">&lt;/a&gt;&lt;/h5&gt;</span>
    {% include share.html %}
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"cover"</span> <span class="na">class=</span><span class="s">"container"</span>
     <span class="err">{%</span> <span class="na">if</span> <span class="na">page</span><span class="err">.</span><span class="na">image</span> <span class="err">%}</span><span class="na">style=</span><span class="s">"background-image: url({{ page.image }});"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;h1&gt;</span>{{ page.title | default: page.name }}<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>All Posts in <span class="nt">&lt;strong&gt;</span>{{ page.name }}<span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tag-content"</span> <span class="na">role=</span><span class="s">"main"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"post-list"</span><span class="nt">&gt;</span>
            {% for post in site.posts %}
                {% if post.tags contains page.name %}
                    {% include item.html %}
                {% endif %}
            {% endfor %}
        <span class="nt">&lt;/ul&gt;</span>
        {% include pagination.html %}
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<ol>
  <li><code class="highlighter-rouge">_tags</code> 디렉토리를 만들고, 그 아래에 각 태그마다
하나의 파일(예: <a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/_tags/opensource.md"><code class="highlighter-rouge">opensource.md</code></a>)을 만듭니다.</li>
</ol>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">opensource</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">오픈소스</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/files/covers/opensource.jpg</span>
<span class="nn">---</span>
</code></pre></div></div>

<p><a href="https://jekyllrb.com/docs/frontmatter/">Front Matter</a>의 내용을 살펴보면:</p>

<ul>
  <li><code class="highlighter-rouge">name</code>: <strong>매칭을 위한 문자열</strong>(일종의 PK)입니다.</li>
  <li><code class="highlighter-rouge">title</code>: 태그별 포스트 목록 페이지 상단에 표시되는 것입니다.</li>
  <li><code class="highlighter-rouge">image</code>: 태그별 포스트 목록 페이지 상단에 표시되는 것으로 없어도 됩니다.</li>
  <li><code class="highlighter-rouge">layout</code>은 생략했으므로, 위에서 <code class="highlighter-rouge">_config.yml</code>에 설정한 <code class="highlighter-rouge">tag</code>가 됩니다.</li>
  <li><code class="highlighter-rouge">permalink</code>는 생략했으므로, 위에서 <code class="highlighter-rouge">_config.yml</code>에 설정한 <code class="highlighter-rouge">/tags/:path/</code>가 됩니다.</li>
</ul>

<blockquote>
  <p>주의: 새로운 태그가 추가되면 새로운 파일을 만들어줘야 합니다.</p>

  <p>이 부분이 이 글에서 소개하는 태깅 방식의 가장 큰 문제점인데…
플러그인 없이 해결하는 방법을 아직 찾지 못했습니다.</p>
</blockquote>

<p><strong>태그별 포스트 목록 페이지</strong>를 생성하는 과정은 다음과 같습니다:</p>

<ol>
  <li><code class="highlighter-rouge">_tags</code> 디렉토리 아래의 파일목록을 수집해서 템플릿 변수 <code class="highlighter-rouge">site.tags</code> 에 담아둔다.(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">collections</code> 설정에 <code class="highlighter-rouge">tags</code>가 있으므로)</li>
  <li><code class="highlighter-rouge">_tags</code> 디렉토리 아래의 파일들(예: <code class="highlighter-rouge">_tags/opensource.md</code> 등)을 처리해서 HTML 파일을 생성한다.(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">collections</code> 설정에 <code class="highlighter-rouge">output: true</code> 이므로)</li>
  <li>각 태그 파일의 데이터를 <code class="highlighter-rouge">_layouts/tag.html</code> 레이아웃 템플릿을 결합해서(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">defaults</code> 설정에 <code class="highlighter-rouge">layout: tag</code> 이므로)</li>
  <li><code class="highlighter-rouge">tags/opensource/index.html</code> 등의 파일에 저장한다.(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">collections</code> 설정에 <code class="highlighter-rouge">permalink: /tags/:path/</code> 이므로)</li>
</ol>

<p>레이아웃 템플릿(<code class="highlighter-rouge">_layouts/tag.html</code>)에서 핵심적인 <a href="https://shopify.github.io/liquid/">Liquid</a> 템플릿 코드를 살펴보면:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"post-list"</span><span class="nt">&gt;</span>
    {% for post in site.posts %}
        {% if post.tags contains page.name %}
            {% include item.html %}
        {% endif %}
    {% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>

<blockquote>
  <p>모든 포스트 목록(<code class="highlighter-rouge">site.posts</code>)을 순회하면서,
포스트의 태그목록 배열(<code class="highlighter-rouge">post.tags</code>)에 지정한 태그를(<code class="highlighter-rouge">page.name</code>)가 포함되어 있으면
해당 포스트를 출력</p>
</blockquote>

<p>하는 코드가 눈에 들어올 겁니다.
(주의: 여기서 <code class="highlighter-rouge">page</code> 변수에는 태그 파일의 데이터가 담겨있습니다.)</p>

<p>단순무식한 <code class="highlighter-rouge">O(포스트개수 x 태그개수)</code> 풀스캔이지만,
이 과정은 정적 사이트 생성 과정에만 이루어지므로 실제 서비스에는 영향이 없습니다.</p>

<p><a href="https://jekyllrb.com/docs/datafiles/">Jekyll의 Data Files 기능</a>을 이용하면
좀 더 쉽고 효율적으로 만들 수 있을것 같지만, 플러그인을 만들어야 해서 pass!
(포스트가 수만개, 태그가 수만개라면, 그냥 데이터베이스 기반 블로그를 쓰시는 것이 정신 건강에 좋습니다.)</p>

<h3 id="작성자별-포스트-목록-페이지">작성자별 포스트 목록 페이지</h3>

<p><a href="https://jekyllrb.com">Jekyll</a>은 작성자라는 개념(author attribution)을 지원하지 않습니다.
애초에 흔한 웹UI도 없으니, 로그인도 없고, 작성자라는 개념도 없죠.
그래서 태그 분류하기에서 사용했던 방법을 조금 변형해서 작성자로 분류하기를 만들었습니다.
과정은 태깅과 거의 같습니다.</p>

<ol>
  <li><code class="highlighter-rouge">_config.yml</code> 파일에 다음과 같이 <code class="highlighter-rouge">collections</code>와 <code class="highlighter-rouge">defaults</code> 설정을 추가합니다:</li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>
<span class="na">collections</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">authors</span><span class="pi">:</span>
    <span class="na">output</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">permalink</span><span class="pi">:</span> <span class="s">/authors/:path/</span>
<span class="nn">...</span>
<span class="na">defaults</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">authors</span>
    <span class="na">values</span><span class="pi">:</span>
      <span class="na">layout</span><span class="pi">:</span> <span class="s">author</span>
<span class="nn">...</span>
<span class="nn">...</span>
</code></pre></div></div>

<p>설명이 필요없겠죠? 태깅과 거의 같습니다. ;)</p>

<ol>
  <li><code class="highlighter-rouge">_layouts</code> 디렉토리에 <strong>작성자별 포스트 목록</strong>을 보여줄 템플릿 파일
<a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/_layouts/author.html"><code class="highlighter-rouge">author.html</code></a>을 만듭니다:</li>
</ol>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"navbar"</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h5&gt;&lt;a</span> <span class="na">id=</span><span class="s">"link-back"</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Main<span class="nt">&lt;/a&gt;&lt;/h5&gt;</span>
    {% include share.html %}
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"cover"</span> <span class="na">class=</span><span class="s">"container"</span>
     <span class="err">{%</span> <span class="na">if</span> <span class="na">page</span><span class="err">.</span><span class="na">cover</span> <span class="err">%}</span><span class="na">style=</span><span class="s">"background-image: url({{ page.cover }});"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"cover-author-image"</span>
             <span class="err">{%</span> <span class="na">if</span> <span class="na">page</span><span class="err">.</span><span class="na">image</span> <span class="err">%}</span><span class="na">style=</span><span class="s">"background-image:url({{ page.image }});"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>{{ page.name }}'s profile image<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;h1&gt;</span>{{ page.title }}<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>All Posts by <span class="nt">&lt;em&gt;</span>{{ page.name }}<span class="nt">&lt;/em&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"author-content"</span> <span class="na">role=</span><span class="s">"main"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"post-list"</span><span class="nt">&gt;</span>
            {% for post in site.posts %}
                {% if post.author == page.name %}
                    {% include item.html %}
                {% endif %}
            {% endfor %}
        <span class="nt">&lt;/ul&gt;</span>
        {% include pagination.html %}
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>역시나 설명이 필요없겠죠? 태깅과 거의 같습니다. ;)</p>

<ol>
  <li><code class="highlighter-rouge">_authors</code> 디렉토리를 만들고, 그 아래에 각 사용자마다
하나의 파일(예: <a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/_authors/ryan.md"><code class="highlighter-rouge">ryan.md</code></a>)을 만듭니다.</li>
</ol>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">ryan</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">라이언</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/files/authors/ryan.jpg</span>
<span class="nn">---</span>
</code></pre></div></div>

<p><strong>작성자별 포스트 목록 페이지</strong>를 생성하는 과정은 다음과 같습니다:</p>

<ol>
  <li><code class="highlighter-rouge">_author</code> 디렉토리 아래의 파일목록을 수집해서 템플릿 변수 <code class="highlighter-rouge">site.authors</code> 에 담아둔다.(<code class="highlighter-rouge">_config.yml</code>의 collections 설정에 <code class="highlighter-rouge">authors</code>가 있으므로)</li>
  <li><code class="highlighter-rouge">_authors</code> 디렉토리 아래의 파일들(예: <code class="highlighter-rouge">_authors/ryan.md</code> 등…)을 처리해서 HTML 파일을 생성한다.(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">collections</code> 설정에 <code class="highlighter-rouge">output: true</code> 이므로)</li>
  <li>각 태그 파일의 데이터를 <code class="highlighter-rouge">_layouts/author.html</code> 레이아웃 템플릿을 결합해서(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">defaults</code> 설정에 <code class="highlighter-rouge">layout: author</code> 이므로)</li>
  <li><code class="highlighter-rouge">authors/ryan/index.html</code> 등의 파일에 저장한다.(<code class="highlighter-rouge">_config.yml</code>의 <code class="highlighter-rouge">collections</code> 설정에 <code class="highlighter-rouge">permalink: /authors/:path/</code> 이므로)</li>
</ol>

<p><img src="/files/blog-copy-paste.jpg" class="hcenter" /></p>

<p>이하 동문 생략…</p>

<h3 id="사이트맵">사이트맵</h3>

<p><a href="https://ghost.org">Ghost</a>를 선택한 이유 중의 하나가 <a href="https://en.wikipedia.org/wiki/Search_engine_optimization">검색 엔진 최적화</a>였습니다.
별다른 설정없이도 페이지에 meta 태그들도 주렁주렁 많이 달아주고,
<a href="http://www.sitemaps.org">사이트맵</a>도 자동으로 만들어 줍니다.</p>

<p>물론 <a href="https://jekyllrb.com">Jekyll</a>에도 <a href="http://www.sitemaps.org">사이트맵</a>을 지원하는 플러그인들이 많습니다만,
역시 <a href="https://pages.github.com">GitHub Pages</a>가 발목을 잡습니다.
그래서… 기본 테마에 포함된 <code class="highlighter-rouge">feed.xml</code>를 참조해서 간단하게 만들었습니다.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: null
---
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;?xml-stylesheet type="text/xsl" href="/sitemap.xsl"?&gt;</span>
<span class="nt">&lt;urlset</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"</span>
        <span class="na">xmlns=</span><span class="s">"http://www.sitemaps.org/schemas/sitemap/0.9"</span><span class="nt">&gt;</span>
  {% for post in site.posts %}
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ site.baseurl }}{{ post.url }}<span class="nt">&lt;/loc&gt;</span>
    {% if post.date %}
    <span class="nt">&lt;lastmod&gt;</span>{{ post.date | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
    {% endif %}
    <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>1.0<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% endfor %}
  {% for page in site.pages %}
  {% if page.sitemap %}
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ site.baseurl }}{{ page.url }}<span class="nt">&lt;/loc&gt;</span>
    {% if page.date %}
    <span class="nt">&lt;lastmod&gt;</span>{{ page.date | date_to_xmlschema }}<span class="nt">&lt;/lastmod&gt;</span>
    {% endif %}
    <span class="nt">&lt;changefreq&gt;</span>{{ sitemap.freq | default: 'monthly' }}<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>{{ sitemap.priority | default: '1.0' }}<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% endif %}
  {% endfor %}
  {% for author in site.authors %}
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ site.baseurl }}/authors/{{ author.name }}<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>monthly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.8<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% endfor %}
  {% for tag in site.tags %}
  <span class="nt">&lt;url&gt;</span>
    <span class="nt">&lt;loc&gt;</span>{{ site.url }}{{ site.baseurl }}/tags/{{ tag.name }}<span class="nt">&lt;/loc&gt;</span>
    <span class="nt">&lt;changefreq&gt;</span>monthly<span class="nt">&lt;/changefreq&gt;</span>
    <span class="nt">&lt;priority&gt;</span>0.8<span class="nt">&lt;/priority&gt;</span>
  <span class="nt">&lt;/url&gt;</span>
  {% endfor %}
<span class="nt">&lt;/urlset&gt;</span>
</code></pre></div></div>

<p>파일 맨 앞에 <a href="https://jekyllrb.com/docs/frontmatter/">Front Matter</a>는 없어도 있어야 합니다(응?)
포스트(<code class="highlighter-rouge">site.posts</code>)는 모두 포함되고,
페이지(<code class="highlighter-rouge">site.pages</code>)중에서 <code class="highlighter-rouge">sitemap</code>속성이 있는 페이지만 포함됩니다.
그리고, 위에서 만든 태그별 포스트 목록과 작성자별 포스트 목록도 포함됩니다.
차~ㅁ 쉽죠?</p>

<p><a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/sitemap.xml">sitemap.xml</a> 파일은 검색 엔진을 위한 것입니다만,
휴먼을 위한 최소한의 배려로, <a href="https://ghost.org">Ghost</a>를 참고해서
<a href="https://raw.githubusercontent.com/kakao/kakao.github.io/master/sitemap.xsl">sitemap.xsl</a>도 추가했습니다.</p>

<p>그 결과는 <a href="http://tech.kakao.com/sitemap.xml">http://tech.kakao.com/sitemap.xml</a>에서 확인하실 수 있습니다.</p>

<h2 id="epilogue">Epilogue</h2>

<p>기업의 기술 블로그에 이런 가벼운 내용이 올라가도 될까…라는 고민을 잠시했지만…
<a href="http://woowabros.github.io/woowabros/2016/06/30/woowabros_cto.html">우아한형제들의 기술 블로그에 김범준 님이 쓰신 글</a>을 보고 용기내어 올려봅니다.</p>

<p>앞으로도 kakao 기술 블로그 많이 사랑해 주세요. 꾸벅~</p>

<p><img src="http://item.kakaocdn.net/do/-26p06+UqCd0OAgiRHNZwHaq4FJCveCBKCNZV-bZscw_/46d01f5ff600e23a970e9ce86c02eff81667fc7b08261b4c493670baa83d5cb9" class="hcenter" /></p>

<blockquote>
  <p>전하는 말씀(or 광고)</p>

  <p>kakao의 오픈소스 업무를 담당할 인재를 모십니다.
<a href="http://www.kakaocorp.com/recruit/progressRecruit?uid=9789">지원하기</a></p>
</blockquote>

</div>
  <div id="post-footer">
    
    <a id="post-author" href="/authors/iolo.fitzowen/">
      <div id="author-image" style="background-image:url(/files/authors/iolo.fitzowen.jpg);">
        <span class="sr-only">iolo.fitzowen's profile image</span>
      </div>
      <p id="author-name">iolo.fitzowen</p>
    </a>
    <p id="post-date">2016-07-07 15:25</p>
    <a id="post-more" href="/authors/iolo.fitzowen/">
      <span>Read more posts by this author</span>
    </a>
  </div>
</div>

<div class="container" style="margin-top:25px; padding:0px">
  <a href="https://www.welcomekakao.com" target="_blank"><img src="/files/career2020.jpg" style="width:100%;"></a>
</div>

<div id="post-links" class="container">
  
  
  <div id="post-prev" style="background-image: url(/files/covers/shard.jpg);" >
    <div>
      <h3><a href="/2016/07/01/adt-mysql-shard-rebalancing/">ADT 활용 예제1: MySQL Shard 데이터 재분배</a></h3>
      <p>YOU MIGHT ENJOY</p>
    </div>
  </div>
  
  
  
  <div id="post-next" style="background-image: url(/files/covers/solid-state-logic.jpg);" >
    <div>
      <h3><a href="/2016/07/13/coding-for-ssd-part-1/">개발자를 위한 SSD (Coding for SSD) - Part 1 : 목차</a></h3>
      <p>NEXT POST</p>
    </div>
  </div>
  
</div>

<div id="lightbox">
  <div id="lightbox-image"></div>
</div>

    <div class="clearfix"></div>

    <a href="#" id="back-to-top"></a>
</div>

<div id="footer" class="container-fluid">
    <ul id="links">
        
        <li>
            <a id="link-github" href="http://github.com/kakao" target="_blank">
                <span class="sr-only">github</span>
            </a>
        </li>
        
        
        <li>
            <a id="link-facebook" href="http://facebook.com/nkakao" target="_blank">
                <span class="sr-only">facebook</span>
            </a>
        </li>
        
        
        <li>
            <a id="link-twitter" href="http://twitter.com/kakaodev" target="_blank">
                <span class="sr-only">twitter</span>
            </a>
        </li>
        
        <li>
            <a id="link-rss" href="/rss" target="_blank">
                <span class="sr-only">rss</span>
            </a>
        </li>
    </ul>
    <ul id="footer-menu">
        <li><a href="//www.kakaocorp.com">Kakao</a></li>
        <li><a href="//careers.kakao.com/jobs">Jobs</a></li>
        <li><a href="//privacy.kakaocorp.com">Privacy</a></li>
    </ul>
    <p id="copyright">
        <a href="//www.kakaocorp.com">Copyright &copy; Kakao Corp.</a>
        All rights reserved.
    </p>
</div><!--#footer-->


<script src="/assets/lib/jquery-1.12.0.min.js"></script>
<script src="/assets/lib/jquery.magnific-popup.min.js"></script>
<script src="/assets/js/index.js"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-72007721-1', 'auto');
    ga('send', 'pageview');
</script>




    <script type='text/javascript'>
   //<![CDATA[
    // 사용할 앱의 JavaScript 키를 설정해 주세요.
    //Kakao.init('65d48e116d8b9409e08960c4800c3017');
    function shareStory(abs_page_url) {
        Kakao.Story.share({
            url: abs_page_url,
            text: '카카오 기술블로그 #개발자 #카카오'
        });
    }
    //]]>
</script>

    
    <script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '1204347326263800',
    xfbml      : true,
    version    : 'v2.7'
  });
};

(function(d, s, id){
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

    

    
    <script>!function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = p + '://platform.twitter.com/widgets.js';
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, 'script', 'twitter-wjs');
</script>

    

    
    <script src="https://apis.google.com/js/platform.js" async defer>
    {
        lang: 'ko'
    }
</script>

    

</body>
</html>
